function typeahead(){var a=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace("nombre"),queryTokenizer:Bloodhound.tokenizers.whitespace,local:profes}),b=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace("nombre"),queryTokenizer:Bloodhound.tokenizers.whitespace,local:subjects}),c=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace("nombre"),queryTokenizer:Bloodhound.tokenizers.whitespace,local:places});$("#busqueda-tab-profesor .typeahead").typeahead({hint:!0,highlight:!0,minLength:1,classNames:{input:"Typeahead-input",hint:"Typeahead-hint",selectable:"Typeahead-selectable",menu:"Typeahead-menu",dataset:"Typeahead-dataset",suggestion:"Typeahead-suggestion",empty:"Typeahead-empty",open:"Typeahead-open",cursor:"Typeahead-cursor"}},{name:"profesores",displayKey:"nombre",source:a,templates:{suggestion:Handlebars.compile('<div class="typeahead-resultados-profesores">{{nombre}} &#45; <span class="label label-primary">Dept. {{{trimString departamento}}}</span></div>')}}),$("#busqueda-tab-asignatura .typeahead").typeahead({hint:!0,highlight:!0,minLength:1,classNames:{input:"Typeahead-input",hint:"Typeahead-hint",selectable:"Typeahead-selectable",menu:"Typeahead-menu",dataset:"Typeahead-dataset",suggestion:"Typeahead-suggestion",empty:"Typeahead-empty",open:"Typeahead-open",cursor:"Typeahead-cursor"}},{name:"asignaturas",displayKey:"nombre",source:b,templates:{suggestion:Handlebars.compile('<div class="typeahead-resultados-asignaturas">{{nombre}} </div>')}}),$("#busqueda-tab-espacio .typeahead").typeahead({hint:!0,highlight:!0,minLength:1,classNames:{input:"Typeahead-input",hint:"Typeahead-hint",selectable:"Typeahead-selectable",menu:"Typeahead-menu",dataset:"Typeahead-dataset",suggestion:"Typeahead-suggestion",empty:"Typeahead-empty",open:"Typeahead-open",cursor:"Typeahead-cursor"}},{name:"espacios",displayKey:"idespacio",source:c,templates:{suggestion:Handlebars.compile('<div class="typeahead-resultados-espacios">{{nombre}} &#45; <span class="label label-primary">{{idedificio.idedificio}}</span></div>')}}),$("#busqueda-tab-todo .typeahead").typeahead({highlight:!0,hint:!0,minLength:1,classNames:{input:"Typeahead-input",hint:"Typeahead-hint",selectable:"Typeahead-selectable",menu:"Typeahead-menu",dataset:"Typeahead-dataset",suggestion:"Typeahead-suggestion",empty:"Typeahead-empty",open:"Typeahead-open",cursor:"Typeahead-cursor"}},{name:"profesores",display:"nombre",source:a,templates:{header:'<div class="typeahead-header-resultados"><span class="fa fa-users"></span>Profesores</h3>',suggestion:Handlebars.compile('<div class="typeahead-resultados-profesores">{{nombre}} &#45; <span class="label label-primary">Dept. {{{trimString departamento}}}</span></div>')}},{name:"asignaturas",display:"nombre",source:b,templates:{header:'<div class="typeahead-header-resultados"><span class="fa fa-graduation-cap"></span>Asignaturas</h3>',suggestion:Handlebars.compile('<div class="typeahead-resultados-asignaturas">{{nombre}} </div>')}},{name:"espacios",display:"idespacio",source:c,templates:{header:'<div class="typeahead-header-resultados"><span class="fa fa-sitemap"></span>Espacios</h3>',suggestion:Handlebars.compile('<div class="typeahead-resultados-espacios">{{nombre}} &#45; <span class="label label-primary">{{idedificio.idedificio}}</span></div>')}}),$("#busqueda-tab-profesor .typeahead").on("typeahead:selected",function(a,b){$("#localizar-profesor").attr("onclick","").attr("onclick","LocalizarProfesor("+b.idprofesor+");")}),$("#busqueda-tab-asignatura .typeahead").on("typeahead:selected",function(a,b){$("#listaDocentes").empty();var d,c=ListarDocentesAsignatura(b.idasignatura),e='<div class="table-responsive">';for(e+='<table class="table table-hover">',e+="<thead><tr><th>Nombre</th><th>Facultad</th><th>Departamento</th></tr></thead>",e+="<tbody>",d=0;d<c.length;d++){e+="<tr ";var f=c[d].departamento.split(",");"0"===c[d].visibilidad&&(e+='class ="danger"'),e+='onclick="LocalizarProfesor('+c[d].idprofesor+');">',e+="<td>"+c[d].nombre+"</td>",e+="<td>Dept. "+f[0]+" , "+c[d].idespacio.idedificio.idedificio+"</td>",e+="<td>"+c[d].correo+"</td>",e+="</tr>"}e+="</tbody>",e+="</table>",e+="</div>",$("#listaDocentes").append(e)}),$("#busqueda-tab-espacio .typeahead").on("typeahead:selected",function(a,b){$("#localizar-espacio").attr("onclick","").attr("onclick",'LocalizarEspacio("'+b.idespacio+'");')}),$("#busqueda-tab-todo .typeahead").on("typeahead:selected.espacios",function(a,b){if(b.departamento&&($("#localizar-all").show(),$("#listaDocentes").empty(),$("#listaTodo").empty(),$("#localizar-all").attr("onclick","").attr("onclick","LocalizarProfesor("+b.idprofesor+");")),b.idasignatura){$("#localizar-all").hide(),$("#listaTodo").empty();var d,c=ListarDocentesAsignatura(b.idasignatura),e='<div class="table-responsive">';for(e+='<table class="table table-hover">',e+="<thead><tr><th>Nombre</th><th>Facultad</th><th>Departamento</th></tr></thead>",e+="<tbody>",d=0;d<c.length;d++){e+="<tr ";var f=c[d].departamento.split(",");"0"===c[d].visibilidad&&(e+='class ="danger"'),e+='onclick="LocalizarProfesor('+c[d].idprofesor+');">',e+="<td>"+c[d].nombre+"</td>",e+="<td>Dept. "+f[0]+" , "+c[d].idespacio.idedificio.idedificio+"</td>",e+="<td>"+c[d].correo+"</td>",e+="</tr>"}e+="</tbody>",e+="</table>",e+="</div>",$("#listaTodo").append(e)}b.bloque&&($("#localizar-all").show(),$("#listaDocentes").empty(),$("#listaTodo").empty(),$("#localizar-all").attr("onclick","").attr("onclick",'LocalizarEspacio("'+b.idespacio+'");'))}),Handlebars.registerHelper("trimString",function(a){var b;if(b=a+"","undefined"!==b){var c=b.split(",");b=new Handlebars.SafeString(c[0])}else b="";return b})}function Buscador(){var a='<div class="modal-header">';a+='   <h4 class="modal-title">Buscador</h4>',a+="            </div>",a+='           <div class="modal-body">',a+="              <p> Buscador que nos permite localizar cualquier estancia de la ETSE, desde el punto de vista de las personas, las estancias, las denominaciones de espacios, o las aulas .</p>",a+='              <ul class="nav nav-tabs">',a+='     <li class="active"><a data-toggle="tab" href="#busqueda-tab-todo"><span class="fa fa-search"></span><span class="modal-tab-text">Todo</span></a></li>',a+='     <li><a data-toggle="tab" href="#busqueda-tab-profesor"><span class="fa fa-users"></span><span class="modal-tab-text">Profesor</span></a></li>',a+='     <li><a data-toggle="tab" href="#busqueda-tab-asignatura"><span class="fa fa-graduation-cap"></span><span class="modal-tab-text">Asignatura</span></a></li>',a+='     <li><a data-toggle="tab" href="#busqueda-tab-espacio"><span class="fa fa-sitemap"></span><span class="modal-tab-text">Espacio</span></a></li>',a+=" </ul>",a+=' <div class="tab-content">',a+='     <div id="busqueda-tab-todo" class="tab-pane fade in active">',a+='         <div class="clearM1"></div>',a+='         <p><input type="text" class="typeahead" placeholder="Campo de texto"></p>',a+='         <div id="listaTodo">',a+="         </div>",a+='         <button id="localizar-all" type="button" class="btn btn-default" >Localizar</button>',a+="     </div>",a+='     <div id="busqueda-tab-profesor" class="tab-pane fade">',a+='         <div class="clearM1"></div>',a+='         <p><input type="text" class="typeahead" placeholder="Campo de texto"></p>',a+='         <input type="hidden" id="todo">',a+='         <div id = "resultados-profesor"></div>',a+='         <button id="localizar-profesor" type="button" class="btn btn-default"  >Localizar</button>',a+="     </div>",a+='     <div id="busqueda-tab-asignatura" class="tab-pane fade">',a+='         <div class="clearM1"></div>',a+='<p><input type="text" class="typeahead" placeholder="Campo de texto"></p>',a+='         <div id="listaDocentes">',a+="         </div>",a+="     </div>",a+='     <div id="busqueda-tab-espacio" class="tab-pane fade">',a+='         <div class="clearM1"></div>',a+='         <p><input type="text" class="typeahead" placeholder="Campo de texto"></p>',a+='         <button id="localizar-espacio" type="button" class="btn btn-default">Localizar</button>',a+="     </div>",a+="  </div>",a+="</div>",a+='<div class="modal-footer">',a+='      <button type="button" class="btn btn-default" onclick="ModalClose();">Close</button>',a+="     </div>",map.fire("modal",{content:a,MODAL_CONTENT_CLS:"modal-content search"}),typeahead(),$(".search").css("margin-top",100)}profes="",subjects="",places="",$.ajax({type:"GET",url:_serverDB+"webresources/profesores/",dataType:"json",success:function(a,b,c){"success"===b&&(profes=a)},async:!1}),$.ajax({type:"GET",url:_serverDB+"webresources/asignaturas/",dataType:"json",success:function(a,b,c){"success"===b&&(subjects=a)},async:!1}),$.ajax({type:"GET",url:_serverDB+"webresources/espacios/",dataType:"json",success:function(a,b,c){"success"===b&&(places=a)},async:!1});